'use strict';let photos_db=[{id:"5c408b7c4465e774e0633f0b",src:"1.jpg",name:"Molina Slater",city:"\u0420\u044F\u0437\u0430\u043D\u044C"},{id:"5c408b7cc56e7a6f297b749a",src:"2.jpeg",name:"Molina Slater",city:"\u0420\u044F\u0437\u0430\u043D\u044C"},{id:"5c408b7c191eda0f320c96a1",src:"3.jpg",name:"Molina Slater",city:"\u0420\u044F\u0437\u0430\u043D\u044C"},{id:"5c408b7cd82408d7ed808aa4",src:"4.jpg",name:"Imelda Jefferson",city:"\u0420\u044F\u0437\u0430\u043D\u044C"},{id:"5c408b7cfb53d12428d4613f",src:"5.jpeg",name:"Imelda Jefferson",city:"\u0420\u044F\u0437\u0430\u043D\u044C"},{id:"5c408b7cbc28fd1ab8ed729e",src:"6.jpg",name:"Imelda Jefferson",city:"\u041C\u043E\u0441\u043A\u0432\u0430"},{id:"5c408b7cf92ee8cd9089bbc5",src:"7.jpeg",name:"Imelda Jefferson",city:"\u041C\u043E\u0441\u043A\u0432\u0430"},{id:"5c408b7c11291ec047504c7d",src:"8.jpg",name:"Imelda Jefferson",city:"\u041C\u043E\u0441\u043A\u0432\u0430"},{id:"5c408b7ce2e4c0debe0c55fc",src:"9.jpeg",name:"Leslie Mcconnell",city:"\u041C\u043E\u0441\u043A\u0432\u0430"},{id:"5c408b7cdfbdaf2915371c94",src:"10.jpg",name:"Mandy Kerr",city:"\u041C\u043E\u0441\u043A\u0432\u0430"},{id:"5c408b7c655975333ee962a6",src:"11.jpeg",name:"Glass Browning",city:"\u041C\u043E\u0441\u043A\u0432\u0430"},{id:"5c408b7c6a048a4b44e3d964",src:"12.jpg",name:"Maddox Stein",city:"\u041C\u043E\u0441\u043A\u0432\u0430"},{id:"5c408b7cb9066aa5f7f69089",src:"13.jpg",name:"Webster Lambert",city:"\u041C\u043E\u0441\u043A\u0432\u0430"},{id:"5c408b7c903a1194f9fea4b1",src:"14.jpg",name:"Loraine Wilkins",city:"\u041C\u043E\u0441\u043A\u0432\u0430"},{id:"5c408b7c17096cf43dc49e52",src:"15.jpeg",name:"Georgia Graham",city:"\u0421\u0430\u043D\u043A\u0442 \u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"},{id:"5c408b7cc4dceec5db0bc735",src:"16.jpeg",name:"Celina Chavez",city:"\u0421\u0430\u043D\u043A\u0442 \u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"},{id:"5c408b7c7f15eb46b8273c70",src:"17.jpg",name:"Lila Hammond",city:"\u0421\u0430\u043D\u043A\u0442 \u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"},{id:"5c408b7c9a9437c7f42532af",src:"18.jpg",name:"Moran Strong",city:"\u0421\u0430\u043D\u043A\u0442 \u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"},{id:"5c408b7cf42a83cb3794da5b",src:"19.jpg",name:"Moran Strong",city:"\u0421\u0430\u043D\u043A\u0442 \u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"},{id:"5c408b7c2ab826f902b0538d",src:"20.jpg",name:"Moran Strong",city:"\u0421\u0430\u043D\u043A\u0442 \u041F\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"}];window.onload=function(){for(var a=document.getElementById("photo-container"),b=document.getElementById("city"),c=document.getElementById("name"),d=document.getElementById("error"),e=document.getElementById("popup"),f=[],g=[],h=[],j=[],k=[],l=[],m=!1,n=0;n<photos_db.length;n++)j[n]=photos_db[n].city,k[n]=photos_db[n].src,l[n]=photos_db[n].name;if("devicePixelRatio"in window&&2==window.devicePixelRatio)for(var o,n=0;n<k.length;n++)o=k[n],o=o.replace(/\.(jpg|jpeg)/,"@2x.$1"),k[n]=o;drawPhotos(k,a),f=unique(j);for(var n=0;n<f.length;n++)b.options[n+1]=new Option(f[n],"city"+(n+1));b.addEventListener("change",function(){for(var c=[],e=[],f=[],l=0;l<photos_db.length;l++)this.options[this.selectedIndex].text==j[l]&&(c[l]=k[l]),""==this.options[this.selectedIndex].text&&(c[l]=k[l]);e=c.filter(a=>null!==a),h=e.slice(),f=0<g.length?findCommonElem(e,g):h,m?(d.style.display="block",removeChildren(a)):0<f.length||0==b.value?(removeChildren(a),drawPhotos(f.filter(a=>null!==a),a),d.style.display="none"):(d.style.display="block",removeChildren(a))}),c.addEventListener("input",function(){for(var b=[],e=[],f=[],j=0;j<l.length;j++)l[j].startsWith(c.value)&&(b[j]=k[j]);e=b.filter(a=>null!==a),g=e.slice(),f=0<h.length?findCommonElem(e,h):g,0<f.length||""==c.value?(removeChildren(a),drawPhotos(f.filter(a=>null!==a),a),d.style.display="none",m=!1):(d.style.display="block",removeChildren(a),m=!0)})};function removeChildren(a){for(;a.lastChild;)a.removeChild(a.lastChild)}function unique(a){for(var b,c={},d=0;d<a.length;d++)b=a[d],c[b]=!0;return Object.keys(c)}function drawPhotos(a,b){for(var c,d=0;d<a.length;d++)c=new Image,c.src="./data/photos/"+a[d],c.className="photo__elem",b.appendChild(c)}function findCommonElem(a,b){for(var c=[],d=0;d<a.length;d++)for(var e=0;e<b.length;e++)a[d]==b[e]&&(c[d]=a[d]);return c}